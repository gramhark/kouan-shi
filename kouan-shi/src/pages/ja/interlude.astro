---
import ScriptureLayout from '../../layouts/ScriptureLayout.astro';

const verseImports = import.meta.glob('../../content/scriptures/ja/interlude/*.md', { query: '?raw', import: 'default' });

const versesData: Record<number, string> = {};
for (const path in verseImports) {
  const verseNum = parseInt(path.split('/').pop()!.replace('.md', ''));
  if (!isNaN(verseNum)) {
    const content = await verseImports[path]();
    versesData[verseNum] = content as string;
  }
}

const verseNumbers = Object.keys(versesData).map(Number).sort((a, b) => a - b);

const kanjiNumerals = ["〇", "一", "二", "三", "四"];
---
<ScriptureLayout
  lang="ja"
  title="光闇詞 - 中詞四節"
  font="Noto Serif JP"
  fontUrl="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700&display=swap"
  chapterTitle="中詞四節"
  backLabel="章選択へ戻る"
  defaultHeading="中詞"
  defaultMessage="目次より、お読みになりたい節を選択してください。"
  storageKey="interludeScrollPos"
  versesData={versesData}
>
  {verseNumbers.map((num) => (
    <li><a href="#" data-verse-num={num}>第{kanjiNumerals[num]}節</a></li>
  ))}
</ScriptureLayout>
